"use strict";var app=angular.module("durfeeswipeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/inventory",{templateUrl:"views/inventory.html",controller:"InventoryCtrl"}).when("/about",{templateUrl:"views/about.html"}).otherwise({redirectTo:"/"})}]);window.onbeforeunload=function(){$rootScope.$broadcast("savestate")},app.factory("productsFactory",function(){var a=[{name:"Sweet Maui Onion chips",price:3},{name:"Jalapeno Chips",price:3},{name:"Pirate's Booty",price:2.5},{name:"Coke",price:2},{name:"Diet Coke",price:2},{name:"Pepsi",price:2},{name:"Diet Pepsi",price:2}];return a}),angular.module("durfeeswipeApp").controller("MainCtrl",["$scope","$timeout","productsFactory","mainService",function(a,b,c,d){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.alerts=[],a.products=c,a.srvc=d;var e=a.srvc.model;a.addAlert=function(c,d){a.alerts.push({type:c,msg:d}),b(function(){a.alerts.splice(a.alerts.length-1,1)},5e3)},a.onItemSelected=function(){e.searchInput=e.searchInput.name,a.lookUpItem()},a.toggleSuggestions=function(){"Show Suggestions"===e.suggestionsLabel?(e.suggestionToggled===!1&&(e.suggestionToggled=!0),e.suggestionsLabel="Hide Suggestions"):e.suggestionsLabel="Show Suggestions"},a.displaySuggestions=function(){return"Hide Suggestions"===e.suggestionsLabel},a.productsUnderLimit=function(){for(var b=[],c=0;c<a.products.length;c++)a.products[c].price<=e.shoppingBag.remainingCredit&&b.push(a.products[c]);return b},a.findItem=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c].name)return c;return-1},a.addItemToBag=function(b){var c=a.findItem(b.name,e.shoppingBag.items);-1!==c?e.shoppingBag.items[c].count+=1:(b.count=1,e.shoppingBag.items.push(b)),e.shoppingBag.totalPrice+=b.price,e.shoppingBag.remainingCredit-=b.price},a.removeItemFromBag=function(b){var c=a.findItem(b.name,e.shoppingBag.items);-1!==c&&(e.shoppingBag.items[c].count-=1,0===e.shoppingBag.items[c].count&&e.shoppingBag.items.splice(c,1)),e.shoppingBag.totalPrice-=b.price,e.shoppingBag.remainingCredit+=b.price},a.lookUpItem=function(){var b=a.findItem(e.searchInput,a.products);-1!==b?(0===e.shoppingBag.items.length&&e.suggestionToggled===!1&&(a.toggleSuggestions(),e.suggestionToggled=!0),a.addItemToBag(a.products[b])):a.addAlert("danger","Product not found."),e.searchInput=""}}]),angular.module("durfeeswipeApp").controller("InventoryCtrl",["$scope","productsFactory",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.products=b}]),angular.module("durfeeswipeApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),app.factory("mainService",["$rootScope",function(a){var b={model:{searchInput:"",shoppingBag:{totalPrice:0,remainingCredit:8,items:[]},suggestionsLabel:"Show Suggestions",suggestionToggled:!1},SaveState:function(){sessionStorage.mainService=angular.toJson(b.model)},RestoreState:function(){b.model=angular.fromJson(sessionStorage.mainService)}};return a.$on("savestate",b.SaveState),a.$on("restorestate",b.RestoreState),b}]);