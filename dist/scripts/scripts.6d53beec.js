"use strict";var app=angular.module("durfeeswipeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/inventory",{templateUrl:"views/inventory.html",controller:"InventoryCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]);window.onbeforeunload=function(){$rootScope.$broadcast("savestate")},app.factory("productsFactory",function(){var a=[{name:"Sweet Maui Onion chips",price:3},{name:"Jalapeno Chips",price:3},{name:"Pirate's Booty",price:2.5},{name:"soda",price:2}];return a}),angular.module("durfeeswipeApp").controller("MainCtrl",["$scope","productsFactory","mainService",function(a,b,c){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.products=b,a.srvc=c;var d=a.srvc.model;a.onItemSelected=function(){d.searchInput=d.searchInput.name,a.lookUpItem()},a.toggleSuggestions=function(){"Show Suggestions"===d.suggestionsLabel?(d.suggestionToggled===!1&&(d.suggestionToggled=!0),d.suggestionsLabel="Hide Suggestions"):d.suggestionsLabel="Show Suggestions"},a.displaySuggestions=function(){return"Hide Suggestions"===d.suggestionsLabel},a.productsUnderLimit=function(){for(var b=[],c=0;c<a.products.length;c++)a.products[c].price<=d.shoppingBag.remainingCredit&&b.push(a.products[c]);return b},a.findItem=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c].name)return c;return-1},a.addItemToBag=function(b){var c=a.findItem(b.name,d.shoppingBag.items);-1!==c?d.shoppingBag.items[c].count+=1:(b.count=1,d.shoppingBag.items.push(b)),d.shoppingBag.totalPrice+=b.price,d.shoppingBag.remainingCredit-=b.price},a.removeItemFromBag=function(b){var c=a.findItem(b.name,d.shoppingBag.items);-1!==c&&(d.shoppingBag.items[c].count-=1,0===d.shoppingBag.items[c].count&&d.shoppingBag.items.splice(c,1)),d.shoppingBag.totalPrice-=b.price,d.shoppingBag.remainingCredit+=b.price},a.lookUpItem=function(){var b=a.findItem(d.searchInput,a.products);-1!==b&&(0===d.shoppingBag.items.length&&d.suggestionToggled===!1&&(a.toggleSuggestions(),d.suggestionToggled=!0),a.addItemToBag(a.products[b])),d.searchInput=""}}]),angular.module("durfeeswipeApp").controller("InventoryCtrl",["$scope","productsFactory",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.products=b}]),angular.module("durfeeswipeApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("durfeeswipeApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),app.factory("mainService",["$rootScope",function(a){var b={model:{searchInput:"",shoppingBag:{totalPrice:0,remainingCredit:8,items:[]},suggestionsLabel:"Show Suggestions",suggestionToggled:!1},SaveState:function(){sessionStorage.mainService=angular.toJson(b.model)},RestoreState:function(){b.model=angular.fromJson(sessionStorage.mainService)}};return a.$on("savestate",b.SaveState),a.$on("restorestate",b.RestoreState),b}]);